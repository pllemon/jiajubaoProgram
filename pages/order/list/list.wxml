<view class="full-layout">
  <van-search
    value="{{ searchValue }}"
    placeholder="请输入关键词"
    use-action-slot
    bind:search="onSearch"
  />

  <van-tabs 
    color="#4c5ce3"
    active="{{currType}}"
    custom-class="gd-tabs"
    tab-class="gd-tab"
    tab-active-class="gd-tab-active"
    bind:change="changeType"
  >
    <block wx:for="{{orderStatus}}" wx:key="index">
      <van-tab title="{{item.label}}" name="{{ item.status }}"/>
    </block>
  </van-tabs>

  <scroll-view scroll-y class="order-list">
    <block wx:if="{{list.length}}">
      <navigator wx:for="{{list}}" wx:key="index" class="order-single" url="../detail/detail?id={{item.order_id}}&personType={{personType}}">
        <view class="category">{{item.service_demand}}</view>
        <view class="status">
          <text wx:if="{{personType == 0}}">{{orderStatus[item.status].label}}</text>
          <block wx:if="{{personType == 1}}">
            <text wx:if="{{item.status == 4}}">已报名</text>
            <text wx:if="{{item.status >= 5 && item.status < 8 && item.is_choose == 1}}">已承接</text>
            <text wx:if="{{item.status >= 5 && item.status < 8 && item.is_choose == 0}}">未承接</text>
            <text wx:if="{{item.status == 8}}">已完成</text>
          </block> 
        </view>
        <view class="mes">
          <icon class="iconfont iconicon_GPS"></icon>
          <text class="content ellipsis">{{item.address}}</text>
        </view>
        <view class="mes">
          <icon class="iconfont iconicon_calendar"></icon>
          <text class="content">{{item.appo_time ? item.appo_time : '上门时间待沟通'}}</text>
        </view>
        <view class="other">
          <view class="label green">天河网点1</view>
          <view class="label red">加急</view>
        </view>
      </navigator>
    </block>
    <block wx:else>
      <view class="no-res">暂无数据</view>
    </block>
  </scroll-view>

  <navigation wx:if="{{showNav == 1}}"></navigation>
</view>
