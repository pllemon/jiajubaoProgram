<view class="full-layout">
  <view class="flex1">
    <view wx:for="{{list}}" wx:key="index" class="goods-single">
      <image class="goods-image" />
      <view class="flex1">
        <view class="name">{{item.name}}</view>
        <view class="flex-center-between">
          <view>
            <text>￥{{item.price}}</text>
          </view>
          <van-stepper 
            data-idx="{{index}}"
            input-class="stepper-input" 
            plus-class="stepper-plus"
            minus-class="stepper-minus"
            value="{{ item.number }}" 
            step="1" 
            min="0"
            disable-input 
            bind:change="onChange"
          />
        </view>
      </view>
    </view>
  </view>
  <view class="action">
    <view>
      <view class="money">合计：
        <text style="color: #4d5ef4">￥{{sum - maxintegral}}</text>
        <text wx:if="{{maxintegral}}" style="color: #868686;font-size:26rpx;text-decoration:line-through;margin-left:10rpx">￥{{sum}}</text>
      </view>
      <view wx:if="{{maxintegral}}" class="jf">共{{sumintegral}}积分，已使用{{maxintegral}}积分抵扣{{maxintegral}}元</view>
    </view>
    <button class="main-btn {{!sum?'disable':''}}" bindtap="makeOrder">下单</button>
  </view>
</view>
