<view class="full-layout">
  <block wx:if="{{location}}">
    <view>
      <van-search
        value="{{ searchValue }}"
        placeholder="请输入关键词"
        use-action-slot
        bind:search="onSearch"
      />
    </view>
    <scroll-content 
      class="common-list"
      is-loadMore = "{{isLoadMore}}"
      is-refresh = "{{isRefresh}}"
      page = "{{page}}"
      last-page = "{{lastPage}}"
      bind:change = "changeList"
    >
      <block wx:for="{{list}}" wx:key="{{index}}">
        <view class="shop-single m20">
          <view class="shop-img">
            <gdImage src="{{ item.shopimg }}"  preview="true"/>
            <gdImage src="{{ item.goodsimg }}"  preview="true"/>
          </view>
          <view class="common-section">
            <view class="flex-start-between">
              <view class="title">{{item.name}}</view>
              <view class="label-green">{{item.distance}}</view>
            </view>
            <view class="mes">
              <icon class="iconfont iconicon_GPS"></icon>
              <text class="content">{{item.address}}</text>
            </view>
            <view class="mes">
              <icon class="iconfont iconicon_phone"></icon>
              <text class="content">{{item.phone}}</text>
            </view>
            <view class="shop-action">
              <button size="mini" data-idx="{{index}}" bindtap="getRoutePlan">导航</button>
              <button size="mini">分享</button>
            </view>
          </view>
        </view>
      </block>
    </scroll-content>
  </block>
  <block wx:else>
    <view class="flex-center-column">
      <image src="/image/example/location.png" class="location-img" mode="aspectFit"></image>
      <button class="flex-center address-btn" open-type="openSetting" bindopensetting="onOpenSetting">
        点击开启定位
      </button>
    </view>
  </block>

  <navigation current-idx="1"></navigation>
</view>
